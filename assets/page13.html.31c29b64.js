import{_ as c,r as o,o as l,c as i,b as n,e as t,w as e,d as s,a as p}from"./app.b33ca31f.js";const u={},r=n("h1",{id:"stm32",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#stm32","aria-hidden":"true"},"#"),s(" STM32")],-1),d=n("hr",null,null,-1),k={class:"table-of-contents"},m=s("STM32 \u6700\u5C0F\u7CFB\u7EDF\u6784\u6210"),v=s("\u6676\u632F\u7535\u8DEF"),b=s("\u590D\u4F4D\u7535\u8DEF"),_=s("\u7535\u6E90\u7535\u8DEF"),h=s("\u5B58\u50A8\u5668\u6620\u5C04"),P=s("\u5BC4\u5B58\u5668\u5C01\u88C5"),y=s("\u542F\u52A8\u6587\u4EF6"),I=s("GPIO\u5DE5\u4F5C\u6A21\u5F0F"),O=s("GPIO\u521D\u59CB\u5316\u6B65\u9AA4"),f=s("LED\u70B9\u706F\u3001\u6A21\u677F\u521B\u5EFA"),L=s("\u4E3B\u7A0B\u5E8F"),g=s("\u5C0F\u7ED3"),C=s("\u65F6\u949F\u7CFB\u7EDF"),x=s("\u4F4D\u5E26\u64CD\u4F5C"),S=s("\u5B8F\u5B9A\u4E49\u4F4D\u5E26\u5B9E\u73B0"),G=s("\u5B8F\u5B9A\u4E49\u5E93\u51FD\u6570\u5B9E\u73B0"),A=s("SysTick\u5B9A\u65F6\u5668"),R=p(`<h2 id="stm32-\u6700\u5C0F\u7CFB\u7EDF\u6784\u6210" tabindex="-1"><a class="header-anchor" href="#stm32-\u6700\u5C0F\u7CFB\u7EDF\u6784\u6210" aria-hidden="true">#</a> STM32 \u6700\u5C0F\u7CFB\u7EDF\u6784\u6210</h2><p>\u82E5\u8981\u4F7F\u7CFB\u7EDF\u6B63\u5E38\u8FD0\u884C\uFF0C\u5FC5\u987B\u786E\u4FDD STM32 \u6700\u5C0F\u7CFB\u7EDF\u7A33\u5B9A\u5DE5\u4F5C\u3002STM32 \u6700\u5C0F\u7CFB\u7EDF \u7531\u4EE5\u4E0B\u51E0\u90E8\u5206\u7EC4\u6210\uFF1A</p><ol><li>\u6676\u632F\u7535\u8DEF</li><li>\u590D\u4F4D\u7535\u8DEF</li><li>\u7535\u6E90\u7535\u8DEF</li><li>\u4E0B\u8F7D\u7535\u8DEF\uFF08\u975E\u5FC5\u987B\uFF09</li></ol><h3 id="\u6676\u632F\u7535\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u6676\u632F\u7535\u8DEF" aria-hidden="true">#</a> \u6676\u632F\u7535\u8DEF</h3><p>STM32\u5185\u90E8\u81EA\u5E26\u65F6\u949F\u6E90\uFF0C\u4F46\u901A\u5E38\u4E0D\u4F7F\u7528\uFF0C\u800C\u662F\u5728\u5355\u7247\u673A\u4E3B \u6676\u632F\u5F15\u811A\u4E0A\u5916\u63A5\u4E00\u4E2A\u6676\u632F\u3002</p><p>\u82E5\u76F4\u63A5\u5C06\u6B64\u6676\u632F\u63A5\u5165\u5355\u7247\u673A\u6676 \u632F\u5F15\u811A\uFF0C\u4F1A\u53D1\u73B0\u7CFB\u7EDF\u5DE5\u4F5C\u4E0D\u7A33\u5B9A\uFF0C\u8FD9\u662F\u56E0\u4E3A\u6676\u632F\u8D77\u632F\u7684\u4E00\u77AC\u95F4\u4F1A\u4EA7\u751F\u4E00\u4E9B\u7535\u611F\uFF0C \u4E3A\u4E86\u6D88\u9664\u8FD9\u4E2A\u7535\u611F\u6240\u5E26\u6765\u7684\u5E72\u6270\uFF0C\u53EF\u4EE5\u5728\u6B64\u6676\u632F\u4E24\u7AEF\u5206\u522B\u52A0\u4E0A\u4E00\u4E2A\u7535\u5BB9\uFF0C\u7535\u5BB9\u7684 \u9009\u53D6\u9700\u8981\u65E0\u6781\u6027\u7684\uFF0C\u53E6\u4E00\u7AEF\u9700\u8981\u5171\u5730\u3002</p><p>\u6839\u636E\u9009\u53D6\u7684\u6676\u632F\u5927\u5C0F\u51B3\u5B9A\u7535\u5BB9\u503C\uFF0C\u901A\u5E38\u7535\u5BB9\u53EF\u5728 <code>10-33PF</code>\u503C\u8303\u56F4\u5185\u9009\u53D6\u3002</p><p>STM32 \u82AF\u7247\u4E0A\u8FD8\u6709\u4E00\u4E2A\u5916\u8BBE\u9700\u8981\u6676\u632F\uFF0C\u5B83\u662F RTC\uFF08\u65F6\u949F\u82AF\u7247\uFF09\u3002</p><h3 id="\u590D\u4F4D\u7535\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u590D\u4F4D\u7535\u8DEF" aria-hidden="true">#</a> \u590D\u4F4D\u7535\u8DEF</h3><p>STM32 \u5F15\u811A\u4E2D\u6709\u4E00\u4E2A NRST \u590D\u4F4D\u5F15\u811A\uFF0C \u800C STM32 \u662F\u4F4E\u7535\u5E73\u590D\u4F4D\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u8FD9\u4E2A\u5F15\u811A\u4FDD\u6301\u4E00\u6BB5\u65F6\u95F4\u4F4E\u7535\u5E73\u5C31\u53EF\u4EE5\u3002</p><p>\u8981\u5B9E \u73B0\u6B64\u529F\u80FD\u901A\u5E38\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u4E00\u79CD\u662F\u901A\u8FC7\u6309\u952E\u8FDB\u884C\u624B\u52A8\u590D\u4F4D\uFF0C\u8FD8\u6709\u4E00\u79CD\u662F\u4E0A\u7535\u590D\u4F4D\uFF0C \u5373\u7535\u6E90\u5F00\u542F\u540E\u81EA\u52A8\u590D\u4F4D\u3002</p><p>\u624B\u52A8\u590D\u4F4D\u662F\u901A\u8FC7\u4E00\u4E2A\u6309\u952E\u53CA\u7535\u5BB9\u7535\u963B\u6240\u7EC4\u6210\uFF0C\u5229\u7528\u6309\u952E \u7684\u5F00\u5173\u529F\u80FD\u5B9E\u73B0\u590D\u4F4D\uFF0C\u6309\u952E\u6309\u4E0B\u540E GND \u76F4\u63A5\u63A5\u5165\u5230\u5355\u7247\u673A NRST \u5F15\u811A\uFF0C\u677E\u5F00\u540E GND \u65AD\u5F00\uFF0CNRST \u88AB\u7535\u963B\u62C9\u4E3A\u9AD8\u7535\u5E73\u3002</p><p>\u81EA\u52A8\u590D\u4F4D\u4E3B \u8981\u662F\u5229\u7528 RC \u5145\u653E\u7535\u529F\u80FD\uFF0C\u7535\u6E90\u5F00\u542F\uFF0C\u7531\u4E8E\u7535\u5BB9\u9694\u76F4\uFF0CGND \u76F4\u63A5\u8FDB\u5165 NRST\uFF0C\u7136\u540E \u7535\u5BB9\u5F00\u59CB\u6162\u6162\u5145\u7535\uFF0C\u76F4\u5230\u5145\u7535\u5B8C\u6210\uFF0C\u6B64\u65F6 NRST \u88AB\u7535\u963B\u62C9\u4E3A\u9AD8\u7535\u5E73\u3002\u8FD9\u6837\u5C31\u8D77\u5230 \u4E0A\u7535\u590D\u4F4D\u7684\u6548\u679C\u3002</p><h3 id="\u7535\u6E90\u7535\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u7535\u6E90\u7535\u8DEF" aria-hidden="true">#</a> \u7535\u6E90\u7535\u8DEF</h3><p>STM32 \u7684\u5DE5\u4F5C\u7535\u538B\u662F 1.8-3.3V \u8303\u56F4\uFF0C\u4F7F\u7528 3.3V \u76F4\u6D41\uFF0C\u5C06\u7535\u6E90\u63A5\u5165\u5230\u82AF\u7247\u7535\u6E90\u5F15\u811A\u5373\u53EF\u3002</p><h2 id="\u5B58\u50A8\u5668\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u5668\u6620\u5C04" aria-hidden="true">#</a> \u5B58\u50A8\u5668\u6620\u5C04</h2><p><img src="https://m.360buyimg.com/babel/jfs/t1/186207/3/23255/243656/626689b7Ef35655a1/ea3f241b9ae8437b.png" alt="image-20220425164538149.png"></p><p>4GB \u7684\u5730\u5740\u7A7A\u95F4\u4E2D\uFF0CARM \u5DF2\u7ECF\u7C97\u7EBF\u6761\u7684\u5E73\u5747\u5206\u6210\u4E86 8 \u4E2A\u5757\uFF0C\u6BCF\u5757 512MB\uFF0C\u6BCF\u4E2A\u5757\u4E5F\u90FD\u89C4\u5B9A \u4E86\u7528\u9014\uFF0C\u5177\u4F53\u5206\u7C7B\u89C1\u8868\u683C\u3002\u6BCF\u4E2A\u5757\u7684\u5927\u5C0F\u90FD\u6709 512MB\uFF0C\u663E\u7136\u8FD9\u662F\u975E\u5E38\u5927\u7684\uFF0C\u82AF\u7247\u5382\u5546\u5728\u6BCF\u4E2A \u5757\u7684\u8303\u56F4\u5185\u8BBE\u8BA1\u5404\u5177\u7279\u8272\u7684\u5916\u8BBE\u65F6\u5E76\u4E0D\u4E00\u5B9A\u90FD\u7528\u5F97\u5B8C\uFF0C\u90FD\u662F\u53EA\u7528\u4E86\u5176\u4E2D\u7684\u4E00\u90E8\u5206\u800C\u5DF2\u3002</p><table><thead><tr><th>\u5E8F\u53F7</th><th>\u7528\u9014</th><th>\u5730\u5740\u8303\u56F4</th></tr></thead><tbody><tr><td>Block 0</td><td>Code</td><td>0x0000 0000 ~ 0x1FFF FFFF(512MB)</td></tr><tr><td>Block 1</td><td>SRAM</td><td>0x2000 0000 ~ 0x3FFF FFFF(512MB)</td></tr><tr><td>Block 2</td><td>\u7247\u4E0A\u5916\u8BBE</td><td>0x4000 0000 ~ 0x5FFF FFFF(512MB)</td></tr><tr><td>Block 3</td><td>FSMC \u7684 bank1 ~ bank2</td><td>0x6000 0000 ~ 0x7FFF FFFF(512MB)</td></tr><tr><td>Block 4</td><td>FSMC \u7684 bank3 ~ bank4</td><td>0x8000 0000 ~ 0x9FFF FFFF(512MB)</td></tr><tr><td>Block 5</td><td>FSMC \u5BC4\u5B58\u5668</td><td>0xA000 0000 ~ 0xCFFF FFFF(512MB)</td></tr><tr><td>Block 6</td><td>\u6CA1\u6709\u4F7F\u7528</td><td>0xD000 0000 ~ 0xDFFF FFFF(512MB)</td></tr><tr><td>Block 7</td><td>Cortex-M4 \u5185\u90E8\u5916\u8BBE</td><td>0xE000 0000 ~ 0xFFFF FFFF(512MB)</td></tr></tbody></table><p><strong>\u91CD\u8981</strong>\uFF1ABlock0 \u7528\u6765\u8BBE\u8BA1\u6210\u5185\u90E8 FLASH\uFF0CBlock1 \u7528\u6765\u8BBE\u8BA1\u6210\u5185\u90E8 RAM\uFF0CBlock2 \u7528\u6765\u8BBE\u8BA1\u6210\u7247\u4E0A\u7684\u5916\u8BBE</p><p><strong>Block 1</strong></p><table><thead><tr><th>\u5757</th><th>\u7528\u9014\u8BF4\u660E</th><th>\u5730\u5740\u8303\u56F4</th></tr></thead><tbody><tr><td>Block1</td><td>\u9884\u7559</td><td>0x2003 0000 ~ 0x3FFF FFFF</td></tr><tr><td></td><td>SRAM3 64KB</td><td>0x2002 0000 ~ 0x2002 FFFF</td></tr><tr><td></td><td>SRAM2 16KB</td><td>0x2001 C000 ~ 0x2001 FFFF</td></tr><tr><td></td><td>SRAM1 112KB</td><td>0x2000 0000 ~ 0x2001 BFFF</td></tr></tbody></table><p><strong>Block 2</strong></p><table><thead><tr><th>\u5757</th><th>\u7528\u9014\u8BF4\u660E</th><th>\u5730\u5740\u8303\u56F4</th></tr></thead><tbody><tr><td>Block2</td><td>APB1 \u603B\u7EBF\u5916\u8BBE</td><td>0x4000 0000 ~ 0x4000 77FF</td></tr><tr><td></td><td>\u9884\u7559</td><td>0x4000 7800 ~ 0x4000 FFFF</td></tr><tr><td></td><td>APB2 \u603B\u7EBF\u5916\u8BBE</td><td>0x4001 0000 ~ 0x4001 57FF</td></tr><tr><td></td><td>\u9884\u7559</td><td>0x4001 5800 ~ 0x4001 FFFF</td></tr><tr><td></td><td>AHB1 \u603B\u7EBF\u5916\u8BBE</td><td>0x4002 0000 ~ 0x4007 FFFF</td></tr><tr><td></td><td>\u9884\u7559</td><td>0x4008 0000 ~ 0x4FFF FFFF</td></tr><tr><td></td><td>AHB2 \u603B\u7EBF\u5916\u8BBE</td><td>0x5000 0000 ~ 0x5006 0BFF</td></tr><tr><td></td><td>\u9884\u7559</td><td>0x5006 0C00 ~ 0x5FFF FFFF</td></tr></tbody></table><h2 id="\u5BC4\u5B58\u5668\u5C01\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5BC4\u5B58\u5668\u5C01\u88C5" aria-hidden="true">#</a> \u5BC4\u5B58\u5668\u5C01\u88C5</h2><p>\u4E3A\u4E86\u66F4\u65B9\u4FBF\u5730\u8BBF\u95EE\u5BC4\u5B58\u5668\uFF0C\u5F15\u5165 C \u8BED\u8A00\u4E2D\u7684\u7ED3\u6784\u4F53\u5BF9\u5BC4\u5B58\u5668\u8FDB\u884C \u5C01\u88C5\uFF0C\u5177\u4F53\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token class-name">uint32_t</span><span class="token punctuation">;</span> <span class="token comment">/*\u65E0\u7B26\u53F7 32 \u4F4D\u53D8\u91CF*/</span>
<span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token keyword">int</span> <span class="token class-name">uint16_t</span><span class="token punctuation">;</span> <span class="token comment">/*\u65E0\u7B26\u53F7 16 \u4F4D\u53D8\u91CF*/</span>
<span class="token comment">/* GPIO \u5BC4\u5B58\u5668\u5217\u8868 */</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{</span>
<span class="token class-name">uint32_t</span> MODER<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u6A21\u5F0F\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x00 */</span>
<span class="token class-name">uint32_t</span> OTYPER<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u8F93\u51FA\u7C7B\u578B\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x04 */</span>
<span class="token class-name">uint32_t</span> OSPEEDR<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u8F93\u51FA\u901F\u5EA6\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x08 */</span>
<span class="token class-name">uint32_t</span> PUPDR<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u4E0A\u62C9/\u4E0B\u62C9\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x0C */</span>
<span class="token class-name">uint32_t</span> IDR<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u8F93\u5165\u6570\u636E\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x10 */</span>
<span class="token class-name">uint32_t</span> ODR<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u8F93\u51FA\u6570\u636E\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x14 */</span>
<span class="token class-name">uint16_t</span> BSRRL<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u7F6E\u4F4D/\u590D\u4F4D\u5BC4\u5B58\u5668\u4F4E 16 \u4F4D\u90E8\u5206 \u5730\u5740\u504F\u79FB:
0x18 */</span>
<span class="token class-name">uint16_t</span> BSRRH<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u7F6E\u4F4D/\u590D\u4F4D\u5BC4\u5B58\u5668\u9AD8 16 \u4F4D\u90E8\u5206 \u5730\u5740\u504F\u79FB:
0x1A */</span>
<span class="token class-name">uint32_t</span> LCKR<span class="token punctuation">;</span> <span class="token comment">/*GPIO \u914D\u7F6E\u9501\u5B9A\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x1C */</span>
<span class="token class-name">uint32_t</span> AFR<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">/*GPIO \u590D\u7528\u529F\u80FD\u914D\u7F6E\u5BC4\u5B58\u5668 \u5730\u5740\u504F\u79FB: 0x20-0x24
*/</span>
<span class="token punctuation">}</span>GPIO_TypeDef<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u7528<code>typedef</code>\u5173\u952E\u5B57\u58F0\u660E\u4E86\u540D\u4E3A<code>GPIO_TypeDef</code>\u7684\u7ED3\u6784\u4F53\u7C7B\u578B\uFF0C\u7ED3 \u6784\u4F53\u5185\u6709 8 \u4E2A\u6210\u5458\u53D8\u91CF\uFF0C\u53D8\u91CF\u540D\u6B63\u597D\u5BF9\u5E94\u5BC4\u5B58\u5668\u7684\u540D\u5B57\u3002C \u8BED\u8A00\u7684\u8BED\u6CD5\u89C4\u5B9A\uFF0C \u7ED3\u6784\u4F53\u5185\u53D8\u91CF\u7684\u5B58\u50A8\u7A7A\u95F4\u662F\u8FDE\u7EED\u7684\uFF0C\u5176\u4E2D 32 \u4F4D\u7684\u53D8\u91CF\u5360\u7528 4 \u4E2A\u5B57\u8282\uFF0C16 \u4F4D\u7684\u53D8 \u91CF\u5360\u7528 2 \u4E2A\u5B57\u8282\u3002</p><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6211\u4EEC\u5B9A\u4E49\u7684\u8FD9\u4E2A <code>GPIO_TypeDef </code>\uFF0C\u5047\u5982\u8FD9\u4E2A\u7ED3\u6784\u4F53\u7684\u9996\u5730\u5740\u4E3A<code>0x4002 0400</code>\uFF08\u8FD9\u4E5F\u662F\u7B2C\u4E00\u4E2A\u6210\u5458\u53D8\u91CF<code>MODER</code>\u7684\u5730\u5740\uFF09\uFF0C\u90A3\u4E48\u7ED3\u6784\u4F53\u4E2D\u7B2C\u4E8C\u4E2A\u6210 \u5458\u53D8\u91CF <code>OTYPER</code> \u7684\u5730\u5740\u5373\u4E3A<code> 0x4002 0400 +0x04</code> \uFF0C\u52A0\u4E0A\u7684\u8FD9\u4E2A<code>0x04</code> \uFF0C\u6B63\u662F\u4EE3 \u8868 <code>MODER</code> \u6240\u5360\u7528\u7684 4 \u4E2A\u5B57\u8282\u5730\u5740\u7684\u504F\u79FB\u91CF\uFF0C\u5176\u5B83\u6210\u5458\u53D8\u91CF\u76F8\u5BF9\u4E8E\u7ED3\u6784\u4F53\u9996\u5730\u5740 \u7684\u504F\u79FB\uFF0C\u5728\u4E0A\u8FF0\u4EE3\u7801\u53F3\u4FA7\u6CE8\u91CA\u5DF2\u7ED9\u51FA\uFF0C\u5176\u4E2D\u7684 <code>BSRR</code> \u5BC4\u5B58\u5668\u5206\u6210\u4E86\u4F4E 16 \u4F4D <code>BSRRL</code> \u548C\u9AD8 16 \u4F4D <code>BSRRH</code>\uFF0C <code>BSRRL</code> \u7F6E 1 \u5F15\u811A\u8F93\u51FA\u9AD8\u7535\u5E73\uFF0C<code>BSRRH</code> \u7F6E 1 \u5F15\u811A\u8F93\u51FA \u4F4E\u7535\u5E73\uFF0C\u8FD9\u91CC\u5206\u5F00\u53EA\u662F\u4E3A\u4E86\u65B9\u4FBF\u64CD\u4F5C\u3002</p><p>\u8FD9\u6837\u7684\u5730\u5740\u504F\u79FB\u4E0E <code>STM32 GPIO</code> \u5916\u8BBE\u5B9A\u4E49\u7684\u5BC4\u5B58\u5668\u5730\u5740\u504F\u79FB\u4E00\u4E00\u5BF9\u5E94\uFF0C\u53EA\u8981 \u7ED9\u7ED3\u6784\u4F53\u8BBE\u7F6E\u597D\u9996\u5730\u5740\uFF0C\u5C31\u80FD\u628A\u7ED3\u6784\u4F53\u5185\u6210\u5458\u7684\u5730\u5740\u786E\u5B9A\u4E0B\u6765\uFF0C\u7136\u540E\u5C31\u80FD\u4EE5\u7ED3\u6784 \u4F53\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BC4\u5B58\u5668\u4E86\uFF0C\u6BD4\u5982\u6211\u4EEC\u8FD8\u662F\u5C06 <code>GPIOB0</code> \u8F93\u51FA\u4F4E\u7535\u5E73\uFF0C\u5177\u4F53\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="custom-container tip"><p class="custom-container-title">\u4E2A\u4EBA\u7406\u89E3</p><p>\u5DE7\u5999\u4F7F\u7528\u7ED3\u6784\u4F53\u5206\u914D\u7A7A\u95F4\u7684\u8FDE\u7EED\u6027\uFF0C\u5C06\u504F\u79FB\u5730\u5740\u4E8E\u7ED3\u6784\u4F53\u6210\u5458\u5BF9\u5E94\u8D77\u6765</p></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code>GPIO_TypeDef <span class="token operator">*</span> GPIOx<span class="token punctuation">;</span> <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A GPIO_TypeDef \u578B\u7ED3\u6784\u4F53\u6307\u9488 GPIOx</span>
GPIOx <span class="token operator">=</span> GPIOB_BASE<span class="token punctuation">;</span> <span class="token comment">//\u628A\u6307\u9488\u5730\u5740\u8BBE\u7F6E\u4E3A\u5B8F GPIOB_BASE \u5730\u5740</span>
GPIOx<span class="token operator">-&gt;</span>BSRRL <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u901A\u8FC7\u6307\u9488\u8BBF\u95EE\u5E76\u4FEE\u6539 GPIOB_BSRRL \u5BC4\u5B58</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u5148\u7528<code>GPIO_TypeDef</code> \u7C7B\u578B\u5B9A\u4E49\u4E00\u4E2A\u7ED3\u6784\u4F53\u6307\u9488 <code>GPIOx</code>\uFF0C\u5E76\u8BA9\u6307\u9488\u6307 \u5411 <code>GPIOB</code> \u57FA\u5730\u5740 <code>GPIOB_BASE</code>\uFF0C\u5730\u5740\u786E\u5B9A\u4E0B\u6765\uFF0C\u7136\u540E\u6839\u636E C \u8BED\u8A00\u8BBF\u95EE\u7ED3\u6784\u4F53\u7684\u5185\u5BB9\uFF0C\u7528 <code>GPIOx-&gt;BSRR</code> \u5199\u5BC4\u5B58\u5668\u3002\u4E3A\u4E86\u64CD\u4F5C\u66F4\u7B80\u4FBF\u7075\u6D3B\uFF0C\u6211\u4EEC\u76F4\u63A5\u4F7F\u7528\u5B8F\u5B9A\u4E49\u597D <code>GPIO_TypeDef</code> \u7C7B\u578B\u7684\u6307\u9488\uFF0C\u800C\u4E14\u6307\u9488\u6307\u5411\u5404\u4E2A <code>GPIO</code> \u7AEF\u53E3\u7684\u9996\u5730\u5740\uFF0C\u4F7F\u7528\u65F6\u6211\u4EEC\u76F4\u63A5\u7528\u8BE5\u5B8F\u8BBF\u95EE\u5BC4\u5B58\u5668\u5373\u53EF\u3002\u5177\u4F53\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOA</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOA_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOB</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOB_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOC</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOC_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOD</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOD_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOE_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOF</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOF_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOG</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOG_BASE<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOH</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>GPIO_TypeDef <span class="token operator">*</span><span class="token punctuation">)</span> GPIOH_BASE<span class="token punctuation">)</span></span></span>
GPIOB<span class="token operator">-&gt;</span>BSRRL <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u542F\u52A8\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8\u6587\u4EF6" aria-hidden="true">#</a> \u542F\u52A8\u6587\u4EF6</h2><p><code>startup_stm32f429xxx.s</code></p><p>\u5148\u6267\u884C<code>SystemInit()</code></p><ol><li>\u521D\u59CB\u5316\u5806\u6808\u6307\u9488SP</li><li>\u521D\u59CB\u5316PC\u6307\u9488</li><li>\u521D\u59CB\u5316\u4E2D\u65AD\u5411\u91CF\u8868</li><li>\u521D\u59CB\u5316\u7CFB\u7EDF\u65F6\u949F</li><li>\u8C03\u7528<code>main()</code></li></ol><h2 id="gpio\u5DE5\u4F5C\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#gpio\u5DE5\u4F5C\u6A21\u5F0F" aria-hidden="true">#</a> GPIO\u5DE5\u4F5C\u6A21\u5F0F</h2><ol><li>\u8F93\u5165\u6A21\u5F0F\uFF08\u4E0A\u62C9\u3001\u4E0B\u62C9\u3001\u6D6E\u7A7A\uFF09</li><li>\u8F93\u51FA\u6A21\u5F0F\uFF08\u63A8\u633D/\u5F00\u6F0F\u3001\u4E0A\u62C9/\u4E0B\u62C9\uFF09</li><li>\u590D\u7528\u529F\u80FD\uFF08\u63A8\u633D/\u5F00\u6F0F\u3001\u4E0A\u62C9/\u4E0B\u62C9\uFF09</li><li>\u6A21\u62DF\u8F93\u5165\u8F93\u51FA\uFF08\u4E0A\u4E0B\u62C9\u65E0\u5F71\u54CD\uFF09</li></ol><h3 id="gpio\u521D\u59CB\u5316\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#gpio\u521D\u59CB\u5316\u6B65\u9AA4" aria-hidden="true">#</a> GPIO\u521D\u59CB\u5316\u6B65\u9AA4</h3><ol><li>\u786E\u5B9AGPIO\u662F\u8F93\u5165\u3001\u901A\u7528\u8F93\u51FA\u3001\u590D\u7528\u529F\u80FD\u8FD8\u662F\u6A21\u62DF\u8F93\u5165\uFF08\u6A21\u5F0F\u5BC4\u5B58\u5668\uFF1AMODER\uFF09</li><li>\u5982\u679C\u8F93\u51FA\u8FD8\u8981\u786E\u5B9A\u662F\u63A8\u633D\u8F93\u51FA\u8FD8\u662F\u5F00\u6F0F\u8F93\u51FA\uFF08\u8F93\u51FA\u7C7B\u578B\u5BC4\u5B58\u5668 \uFF1AOTYPER\uFF09</li><li>\u914D\u7F6E\u8F93\u51FA\u7684\u901F\u5EA6\uFF08\u8F93\u51FA\u901F\u5EA6\u5BC4\u5B58\u5668\uFF1AOSPEEDR\uFF09</li><li>\u8F93\u51FA\u7684\u65F6\u5019\u5185\u90E8\u7684\u4E0A/\u4E0B\u62C9\u7535\u963B\u8981\u4E0D\u8981\u5F00\u542F\uFF08\u4E0A\u62C9/\u4E0B\u62C9\u5BC4\u5B58\u5668\uFF1APUPDR\uFF09</li><li>\u5177\u4F53\u8981\u8F93\u51FA\u7684\u5185\u5BB9\uFF08\u7F6E\u4F4D\u590D\u4F4D\u5BC4\u5B58\u5668\uFF1ABSRR\u548C\u6570\u636E\u8F93\u51FA\u5BC4\u5B58\u5668\uFF1AODR\uFF09</li></ol><p><strong>\u4E3E\u4F8B</strong></p><table><thead><tr><th>\u5BC4\u5B58\u5668\u540D\u79F0</th><th>\u5BC4\u5B58\u5668\u5730\u5740</th><th>\u76F8\u5BF9 GPIOB\u57FA\u5740\u7684\u504F\u79FB</th></tr></thead><tbody><tr><td>GPIOF_MODER</td><td>0x4002 1400</td><td>0x00</td></tr><tr><td>GPIOF_OTYPER</td><td>0x4002 1404</td><td>0x04</td></tr><tr><td>GPIOF_OSPEEDR</td><td>0x4002 1408</td><td>0x08</td></tr><tr><td>GPIOF_PUPDR</td><td>0x4002 140C</td><td>0x0C</td></tr><tr><td>GPIOF_IDR</td><td>0x4002 1410</td><td>0x10</td></tr><tr><td>GPIOF_ODR</td><td>0x4002 1414</td><td>0x14</td></tr><tr><td>GPIOF_BSRR</td><td>0x4002 1418</td><td>0x18</td></tr><tr><td>GPIOF_LCKR</td><td>0x4002 141C</td><td>0x1C</td></tr><tr><td>GPIOF_AFRL</td><td>0x4002 1420</td><td>0x20</td></tr><tr><td>GPIOF_AFRH</td><td>0x4002 1424</td><td>0x24</td></tr></tbody></table><h2 id="led\u70B9\u706F\u3001\u6A21\u677F\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#led\u70B9\u706F\u3001\u6A21\u677F\u521B\u5EFA" aria-hidden="true">#</a> LED\u70B9\u706F\u3001\u6A21\u677F\u521B\u5EFA</h2><p><strong>\u6587\u4EF6\u7ED3\u6784</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>//\u6811\u5F62\u7ED3\u6784
<span class="token builtin class-name">.</span>
\u251C\u2500APP			 			<span class="token comment">#\u5B58\u653E\u5916\u8BBE\u9A71\u52A8</span>
\u2502  \u2514\u2500LED					<span class="token comment">#LED\u5916\u8BBE</span>
\u251C\u2500DebugConfig				<span class="token comment">#MDK\u81EA\u52A8\u751F\u6210</span>
\u251C\u2500Libraries					<span class="token comment">#HAL\u5E93\u79FB\u690D\u6587\u4EF6\u5939</span>
\u2502  \u251C\u2500CMSIS					<span class="token comment">#\u7B26\u5408CMSIS\u6807\u51C6\u7684core \u548C startup\u6587\u4EF6</span>
\u2502  \u2514\u2500STM32F4xx_HAL_Driver	<span class="token comment">#HAL\u5E93\u9A71\u52A8\uFF08\u76F4\u63A5\u590D\u5236\uFF09</span>
\u2502      \u251C\u2500Inc
\u2502      \u2502  \u2514\u2500Legacy
\u2502      \u2514\u2500Src
\u251C\u2500Obj						<span class="token comment">#MDK\u4EA7\u751F\u6587\u4EF6</span>
\u251C\u2500Public					<span class="token comment">#System\u6587\u4EF6</span>
\u2514\u2500User						<span class="token comment">#\u4E3B\u51FD\u6570\u3001HAL_conf\u3001HAL_msp\uFF08\u56DE\u8C03\uFF09\u3001\u4E2D\u65AD\u3001stm32f4xx\u7B49</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4E3B\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u7A0B\u5E8F" aria-hidden="true">#</a> \u4E3B\u7A0B\u5E8F</h3><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//main.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	
	<span class="token function">HAL_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//\u521D\u59CB\u5316HAL\u5E93 </span>
	<span class="token function">SystemClock_Init</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//\u8BBE\u7F6E\u65F6\u949F,180Mhz</span>
	<span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//LED\u521D\u59CB\u5316</span>
	
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_1<span class="token punctuation">,</span>GPIO_PIN_RESET<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//PB1\u8F93\u51FA\u4F4E</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u653E\u5230\u6700\u524D\u9762</span>
	GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>
	
	<span class="token function">__HAL_RCC_GPIOB_CLK_ENABLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4F7F\u80FDGPIOB\u65F6\u949F</span>
	<span class="token comment">//\u5148\u914D\u7F6E\u597D\u4E00\u4E2A\u7ED3\u6784\u4F53</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Pin<span class="token operator">=</span>GPIO_PIN_0<span class="token operator">|</span>GPIO_PIN_1<span class="token punctuation">;</span> <span class="token comment">//PB0,1</span>
    GPIO_InitStructure<span class="token punctuation">.</span>Mode<span class="token operator">=</span>GPIO_MODE_OUTPUT_PP<span class="token punctuation">;</span>  <span class="token comment">//\u63A8\u633D\u8F93\u51FA</span>
    GPIO_InitStructure<span class="token punctuation">.</span>Pull<span class="token operator">=</span>GPIO_PULLUP<span class="token punctuation">;</span>          <span class="token comment">//\u4E0A\u62C9</span>
    GPIO_InitStructure<span class="token punctuation">.</span>Speed<span class="token operator">=</span>GPIO_SPEED_HIGH<span class="token punctuation">;</span>     <span class="token comment">//\u9AD8\u901F</span>
    <span class="token comment">//\u7136\u540E\u4E00\u80A1\u8111\u7684\u585E\u5165Init\u51FD\u6570</span>
    <span class="token function">HAL_GPIO_Init</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span><span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_0<span class="token punctuation">,</span>GPIO_PIN_SET<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//PB0\u8F93\u51FA\u9AD8</span>
	<span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_1<span class="token punctuation">,</span>GPIO_PIN_SET<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//PB1\u8F93\u51FA\u9AD8</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.h</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_led_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_led_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>


<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//system.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>



<span class="token comment">//\u65F6\u949F\u7CFB\u7EDF\u914D\u7F6E\u51FD\u6570</span>
<span class="token comment">//Fvco=Fs*(plln/pllm);</span>
<span class="token comment">//SYSCLK=Fvco/pllp=Fs*(plln/(pllm*pllp));</span>
<span class="token comment">//Fusb=Fvco/pllq=Fs*(plln/(pllm*pllq));</span>

<span class="token comment">//Fvco:VCO\u9891\u7387</span>
<span class="token comment">//SYSCLK:\u7CFB\u7EDF\u65F6\u949F\u9891\u7387</span>
<span class="token comment">//Fusb:USB,SDIO,RNG\u7B49\u7684\u65F6\u949F\u9891\u7387</span>
<span class="token comment">//Fs:PLL\u8F93\u5165\u65F6\u949F\u9891\u7387,\u53EF\u4EE5\u662FHSI,HSE\u7B49. </span>
<span class="token comment">//pllm:\u4E3BPLL\u548C\u97F3\u9891PLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u524D\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~63.</span>
<span class="token comment">//plln:\u4E3BPLL\u500D\u9891\u7CFB\u6570(PLL\u500D\u9891),\u53D6\u503C\u8303\u56F4:64~432.</span>
<span class="token comment">//pllp:\u7CFB\u7EDF\u65F6\u949F\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2,4,6,8.(\u4EC5\u9650\u8FD94\u4E2A\u503C!)</span>
<span class="token comment">//pllq:USB/SDIO/\u968F\u673A\u6570\u4EA7\u751F\u5668\u7B49\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~15.</span>

<span class="token comment">//\u5916\u90E8\u6676\u632F\u4E3A25M\u7684\u65F6\u5019,\u63A8\u8350\u503C:pllm=25,plln=360,pllp=2,pllq=8.</span>
<span class="token comment">//\u5F97\u5230:Fvco=25*(360/25)=360Mhz</span>
<span class="token comment">//     SYSCLK=360/2=180Mhz</span>
<span class="token comment">//     Fusb=360/8=45Mhz</span>
<span class="token comment">//\u8FD4\u56DE\u503C:0,\u6210\u529F;1,\u5931\u8D25</span>
<span class="token keyword">void</span> <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span>u32 pllm<span class="token punctuation">,</span>u32 plln<span class="token punctuation">,</span>u32 pllp<span class="token punctuation">,</span>u32 pllq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    HAL_StatusTypeDef ret <span class="token operator">=</span> HAL_OK<span class="token punctuation">;</span>
    RCC_OscInitTypeDef RCC_OscInitStructure<span class="token punctuation">;</span> 
    RCC_ClkInitTypeDef RCC_ClkInitStructure<span class="token punctuation">;</span>
    
    <span class="token function">__HAL_RCC_PWR_CLK_ENABLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u4F7F\u80FDPWR\u65F6\u949F</span>
    
    <span class="token comment">//\u4E0B\u9762\u8FD9\u4E2A\u8BBE\u7F6E\u7528\u6765\u8BBE\u7F6E\u8C03\u538B\u5668\u8F93\u51FA\u7535\u538B\u7EA7\u522B\uFF0C\u4EE5\u4FBF\u5728\u5668\u4EF6\u672A\u4EE5\u6700\u5927\u9891\u7387\u5DE5\u4F5C</span>
    <span class="token comment">//\u65F6\u4F7F\u6027\u80FD\u4E0E\u529F\u8017\u5B9E\u73B0\u5E73\u8861\uFF0C\u6B64\u529F\u80FD\u53EA\u6709STM32F42xx\u548CSTM32F43xx\u5668\u4EF6\u6709\uFF0C</span>
    <span class="token function">__HAL_PWR_VOLTAGESCALING_CONFIG</span><span class="token punctuation">(</span>PWR_REGULATOR_VOLTAGE_SCALE1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BBE\u7F6E\u8C03\u538B\u5668\u8F93\u51FA\u7535\u538B\u7EA7\u522B1</span>
    
    RCC_OscInitStructure<span class="token punctuation">.</span>OscillatorType<span class="token operator">=</span>RCC_OSCILLATORTYPE_HSE<span class="token punctuation">;</span>    <span class="token comment">//\u65F6\u949F\u6E90\u4E3AHSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>HSEState<span class="token operator">=</span>RCC_HSE_ON<span class="token punctuation">;</span>                      <span class="token comment">//\u6253\u5F00HSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLState<span class="token operator">=</span>RCC_PLL_ON<span class="token punctuation">;</span><span class="token comment">//\u6253\u5F00PLL</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLSource<span class="token operator">=</span>RCC_PLLSOURCE_HSE<span class="token punctuation">;</span><span class="token comment">//PLL\u65F6\u949F\u6E90\u9009\u62E9HSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLM<span class="token operator">=</span>pllm<span class="token punctuation">;</span> <span class="token comment">//\u4E3BPLL\u548C\u97F3\u9891PLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u524D\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~63.</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLN<span class="token operator">=</span>plln<span class="token punctuation">;</span> <span class="token comment">//\u4E3BPLL\u500D\u9891\u7CFB\u6570(PLL\u500D\u9891),\u53D6\u503C\u8303\u56F4:64~432.  </span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLP<span class="token operator">=</span>pllp<span class="token punctuation">;</span> <span class="token comment">//\u7CFB\u7EDF\u65F6\u949F\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2,4,6,8.(\u4EC5\u9650\u8FD94\u4E2A\u503C!)</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLQ<span class="token operator">=</span>pllq<span class="token punctuation">;</span> <span class="token comment">//USB/SDIO/\u968F\u673A\u6570\u4EA7\u751F\u5668\u7B49\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~15.</span>
    ret<span class="token operator">=</span><span class="token function">HAL_RCC_OscConfig</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RCC_OscInitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u521D\u59CB\u5316</span>
	
    <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">!=</span>HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    ret<span class="token operator">=</span><span class="token function">HAL_PWREx_EnableOverDrive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5F00\u542FOver-Driver\u529F\u80FD</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">!=</span>HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//\u9009\u4E2DPLL\u4F5C\u4E3A\u7CFB\u7EDF\u65F6\u949F\u6E90\u5E76\u4E14\u914D\u7F6EHCLK,PCLK1\u548CPCLK2</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>ClockType<span class="token operator">=</span><span class="token punctuation">(</span>RCC_CLOCKTYPE_SYSCLK<span class="token operator">|</span>RCC_CLOCKTYPE_HCLK<span class="token operator">|</span>RCC_CLOCKTYPE_PCLK1<span class="token operator">|</span>RCC_CLOCKTYPE_PCLK2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>SYSCLKSource<span class="token operator">=</span>RCC_SYSCLKSOURCE_PLLCLK<span class="token punctuation">;</span><span class="token comment">//\u8BBE\u7F6E\u7CFB\u7EDF\u65F6\u949F\u65F6\u949F\u6E90\u4E3APLL</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>AHBCLKDivider<span class="token operator">=</span>RCC_SYSCLK_DIV1<span class="token punctuation">;</span><span class="token comment">//AHB\u5206\u9891\u7CFB\u6570\u4E3A1</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>APB1CLKDivider<span class="token operator">=</span>RCC_HCLK_DIV4<span class="token punctuation">;</span> <span class="token comment">//APB1\u5206\u9891\u7CFB\u6570\u4E3A4</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>APB2CLKDivider<span class="token operator">=</span>RCC_HCLK_DIV2<span class="token punctuation">;</span> <span class="token comment">//APB2\u5206\u9891\u7CFB\u6570\u4E3A2</span>
    ret<span class="token operator">=</span><span class="token function">HAL_RCC_ClockConfig</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RCC_ClkInitStructure<span class="token punctuation">,</span>FLASH_LATENCY_5<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u540C\u65F6\u8BBE\u7F6EFLASH\u5EF6\u65F6\u5468\u671F\u4E3A5WS\uFF0C\u4E5F\u5C31\u662F6\u4E2ACPU\u5468\u671F\u3002</span>
		
    <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">!=</span>HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//system.h</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__system_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__system_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;stm32f4xx.h&quot;</span></span>


<span class="token comment">//\u5B9A\u4E49\u4E00\u4E9B\u5E38\u7528\u7684\u6570\u636E\u7C7B\u578B\u77ED\u5173\u952E\u5B57 </span>
<span class="token keyword">typedef</span> <span class="token class-name">int32_t</span>  s32<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token class-name">int16_t</span> s16<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token class-name">int8_t</span>  s8<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">int32_t</span> sc32<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">int16_t</span> sc16<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">int8_t</span> sc8<span class="token punctuation">;</span>  

<span class="token keyword">typedef</span> __IO <span class="token class-name">int32_t</span>  vs32<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> __IO <span class="token class-name">int16_t</span>  vs16<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> __IO <span class="token class-name">int8_t</span>   vs8<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> __I <span class="token class-name">int32_t</span> vsc32<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> __I <span class="token class-name">int16_t</span> vsc16<span class="token punctuation">;</span> 
<span class="token keyword">typedef</span> __I <span class="token class-name">int8_t</span> vsc8<span class="token punctuation">;</span>   

<span class="token keyword">typedef</span> <span class="token class-name">uint32_t</span>  u32<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token class-name">uint16_t</span> u16<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token class-name">uint8_t</span>  u8<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">uint32_t</span> uc32<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">uint16_t</span> uc16<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token class-name">uint8_t</span> uc8<span class="token punctuation">;</span> 

<span class="token keyword">typedef</span> __IO <span class="token class-name">uint32_t</span>  vu32<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> __IO <span class="token class-name">uint16_t</span> vu16<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> __IO <span class="token class-name">uint8_t</span>  vu8<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> __I <span class="token class-name">uint32_t</span> vuc32<span class="token punctuation">;</span>  
<span class="token keyword">typedef</span> __I <span class="token class-name">uint16_t</span> vuc16<span class="token punctuation">;</span> 
<span class="token keyword">typedef</span> __I <span class="token class-name">uint8_t</span> vuc8<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span>u32 pllm<span class="token punctuation">,</span>u32 plln<span class="token punctuation">,</span>u32 pllp<span class="token punctuation">,</span>u32 pllq<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a> \u5C0F\u7ED3</h3><p><code>__HAL_RCC_GPIOB_CLK_ENABLE();</code>\u5148\u65F6\u949F\u4F7F\u80FD</p><p><code>HAL_GPIO_WritePin( GPIOB, GPIO_PIN_0, GPIO_PIN_SET);</code></p><p><code>HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_1);</code>\u7FFB\u8F6C</p><p><code>HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_1);</code></p><div class="custom-container tip"><p class="custom-container-title">\u4E2A\u4EBA\u7406\u89E3</p><p>\u5148\u5B9A\u4E49\u4E00\u4E2A\u7ED3\u6784\u4F53\uFF0C\u628A\u8BE5\u7ED3\u6784\u4F53\u5B9E\u4F8B\u5316\uFF0C\u7136\u540E\u6253\u5305\u9001\u5230\u521D\u59CB\u5316\u51FD\u6570\u91CC</p></div><h2 id="\u65F6\u949F\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#\u65F6\u949F\u7CFB\u7EDF" aria-hidden="true">#</a> \u65F6\u949F\u7CFB\u7EDF</h2><p><img src="https://m.360buyimg.com/babel/jfs/t1/103268/17/28376/186306/626689b5Ee8d230bd/0e2a57459bc507b2.png" alt="image-20220425155443678.png"></p><p><img src="https://m.360buyimg.com/babel/jfs/t1/183536/34/25662/201871/626689b4E7a7c1a93/09e850c87d6bc818.png" alt="image-20220425155633584.png"></p><p>\u8BE6\u7EC6\u770B\u5F00\u53D1\u6307\u5357\uFF08\u7CFB\u7EDF\u65F6\u949F\uFF09</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//main.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span>u32 i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token function">HAL_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//\u521D\u59CB\u5316HAL\u5E93</span>
    <span class="token comment">//\u8BBE\u7F6E\u65F6\u949F  ((25/m) * n)/p=180  m=25 n=360 p=2</span>
    <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//192Mhz</span>
    <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
		<span class="token function">HAL_GPIO_TogglePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span> GPIO_PIN_0<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">HAL_GPIO_TogglePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span> GPIO_PIN_1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//system.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>

<span class="token comment">//\u65F6\u949F\u7CFB\u7EDF\u914D\u7F6E\u51FD\u6570</span>
<span class="token comment">//Fvco=Fs*(plln/pllm);</span>
<span class="token comment">//SYSCLK=Fvco/pllp=Fs*(plln/(pllm*pllp));</span>
<span class="token comment">//Fusb=Fvco/pllq=Fs*(plln/(pllm*pllq));</span>

<span class="token comment">//Fvco:VCO\u9891\u7387</span>
<span class="token comment">//SYSCLK:\u7CFB\u7EDF\u65F6\u949F\u9891\u7387</span>
<span class="token comment">//Fusb:USB,SDIO,RNG\u7B49\u7684\u65F6\u949F\u9891\u7387</span>
<span class="token comment">//Fs:PLL\u8F93\u5165\u65F6\u949F\u9891\u7387,\u53EF\u4EE5\u662FHSI,HSE\u7B49.</span>
<span class="token comment">//pllm:\u4E3BPLL\u548C\u97F3\u9891PLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u524D\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~63.</span>
<span class="token comment">//plln:\u4E3BPLL\u500D\u9891\u7CFB\u6570(PLL\u500D\u9891),\u53D6\u503C\u8303\u56F4:64~432.</span>
<span class="token comment">//pllp:\u7CFB\u7EDF\u65F6\u949F\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2,4,6,8.(\u4EC5\u9650\u8FD94\u4E2A\u503C!)</span>
<span class="token comment">//pllq:USB/SDIO/\u968F\u673A\u6570\u4EA7\u751F\u5668\u7B49\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~15.</span>

<span class="token comment">//\u5916\u90E8\u6676\u632F\u4E3A25M\u7684\u65F6\u5019,\u63A8\u8350\u503C:pllm=25,plln=360,pllp=2,pllq=8.</span>
<span class="token comment">//\u5F97\u5230:Fvco=25*(360/25)=360Mhz</span>
<span class="token comment">//     SYSCLK=360/2=180Mhz</span>
<span class="token comment">//     Fusb=360/8=45Mhz</span>
<span class="token comment">//\u8FD4\u56DE\u503C:0,\u6210\u529F;1,\u5931\u8D25</span>
<span class="token keyword">void</span> <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span>u32 pllm<span class="token punctuation">,</span> u32 plln<span class="token punctuation">,</span> u32 pllp<span class="token punctuation">,</span> u32 pllq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    HAL_StatusTypeDef ret <span class="token operator">=</span> HAL_OK<span class="token punctuation">;</span>
    RCC_OscInitTypeDef RCC_OscInitStructure<span class="token punctuation">;</span>
    RCC_ClkInitTypeDef RCC_ClkInitStructure<span class="token punctuation">;</span>

    <span class="token function">__HAL_RCC_PWR_CLK_ENABLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u4F7F\u80FDPWR\u65F6\u949F</span>

    <span class="token comment">//\u4E0B\u9762\u8FD9\u4E2A\u8BBE\u7F6E\u7528\u6765\u8BBE\u7F6E\u8C03\u538B\u5668\u8F93\u51FA\u7535\u538B\u7EA7\u522B\uFF0C\u4EE5\u4FBF\u5728\u5668\u4EF6\u672A\u4EE5\u6700\u5927\u9891\u7387\u5DE5\u4F5C</span>
    <span class="token comment">//\u65F6\u4F7F\u6027\u80FD\u4E0E\u529F\u8017\u5B9E\u73B0\u5E73\u8861\uFF0C\u6B64\u529F\u80FD\u53EA\u6709STM32F42xx\u548CSTM32F43xx\u5668\u4EF6\u6709\uFF0C</span>
    <span class="token function">__HAL_PWR_VOLTAGESCALING_CONFIG</span><span class="token punctuation">(</span>PWR_REGULATOR_VOLTAGE_SCALE1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BBE\u7F6E\u8C03\u538B\u5668\u8F93\u51FA\u7535\u538B\u7EA7\u522B1</span>
	<span class="token comment">//Osc \u632F\u8361\u5668</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>OscillatorType <span class="token operator">=</span> RCC_OSCILLATORTYPE_HSE<span class="token punctuation">;</span>  <span class="token comment">//\u65F6\u949F\u6E90\u4E3AHSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>HSEState <span class="token operator">=</span> RCC_HSE_ON<span class="token punctuation">;</span>                    <span class="token comment">//\u6253\u5F00HSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLState <span class="token operator">=</span> RCC_PLL_ON<span class="token punctuation">;</span> <span class="token comment">//\u6253\u5F00PLL</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLSource <span class="token operator">=</span> RCC_PLLSOURCE_HSE<span class="token punctuation">;</span> <span class="token comment">//PLL\u65F6\u949F\u6E90\u9009\u62E9HSE</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLM <span class="token operator">=</span> pllm<span class="token punctuation">;</span> <span class="token comment">//\u4E3BPLL\u548C\u97F3\u9891PLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u524D\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~63.</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLN <span class="token operator">=</span> plln<span class="token punctuation">;</span> <span class="token comment">//\u4E3BPLL\u500D\u9891\u7CFB\u6570(PLL\u500D\u9891),\u53D6\u503C\u8303\u56F4:64~432.</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLP <span class="token operator">=</span> pllp<span class="token punctuation">;</span> <span class="token comment">//\u7CFB\u7EDF\u65F6\u949F\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2,4,6,8.(\u4EC5\u9650\u8FD94\u4E2A\u503C!)</span>
    RCC_OscInitStructure<span class="token punctuation">.</span>PLL<span class="token punctuation">.</span>PLLQ <span class="token operator">=</span> pllq<span class="token punctuation">;</span> <span class="token comment">//USB/SDIO/\u968F\u673A\u6570\u4EA7\u751F\u5668\u7B49\u7684\u4E3BPLL\u5206\u9891\u7CFB\u6570(PLL\u4E4B\u540E\u7684\u5206\u9891),\u53D6\u503C\u8303\u56F4:2~15.</span>
    ret <span class="token operator">=</span> <span class="token function">HAL_RCC_OscConfig</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RCC_OscInitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u521D\u59CB\u5316</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">!=</span> HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ret <span class="token operator">=</span> <span class="token function">HAL_PWREx_EnableOverDrive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5F00\u542FOver-Driver\u529F\u80FD</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">!=</span> HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u9009\u4E2DPLL\u4F5C\u4E3A\u7CFB\u7EDF\u65F6\u949F\u6E90\u5E76\u4E14\u914D\u7F6EHCLK,PCLK1\u548CPCLK2</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>ClockType <span class="token operator">=</span> <span class="token punctuation">(</span>RCC_CLOCKTYPE_SYSCLK <span class="token operator">|</span> RCC_CLOCKTYPE_HCLK <span class="token operator">|</span> RCC_CLOCKTYPE_PCLK1 <span class="token operator">|</span> RCC_CLOCKTYPE_PCLK2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>SYSCLKSource <span class="token operator">=</span> RCC_SYSCLKSOURCE_PLLCLK<span class="token punctuation">;</span> <span class="token comment">//\u8BBE\u7F6E\u7CFB\u7EDF\u65F6\u949F\u65F6\u949F\u6E90\u4E3APLL</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>AHBCLKDivider <span class="token operator">=</span> RCC_SYSCLK_DIV1<span class="token punctuation">;</span> <span class="token comment">//AHB\u5206\u9891\u7CFB\u6570\u4E3A1</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>APB1CLKDivider <span class="token operator">=</span> RCC_HCLK_DIV4<span class="token punctuation">;</span> <span class="token comment">//APB1\u5206\u9891\u7CFB\u6570\u4E3A4</span>
    RCC_ClkInitStructure<span class="token punctuation">.</span>APB2CLKDivider <span class="token operator">=</span> RCC_HCLK_DIV2<span class="token punctuation">;</span> <span class="token comment">//APB2\u5206\u9891\u7CFB\u6570\u4E3A2</span>
    ret <span class="token operator">=</span> <span class="token function">HAL_RCC_ClockConfig</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RCC_ClkInitStructure<span class="token punctuation">,</span> FLASH_LATENCY_5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u540C\u65F6\u8BBE\u7F6EFLASH\u5EF6\u65F6\u5468\u671F\u4E3A5WS\uFF0C\u4E5F\u5C31\u662F6\u4E2ACPU\u5468\u671F\u3002</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">!=</span> HAL_OK<span class="token punctuation">)</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u4E2A\u4EBA\u7406\u89E3</p><p>\u6DF1\u5165\u7406\u89E3\u65F6\u949F\u6811\u4E0D\u96BE\uFF0C<code>H</code>\u9AD8\u3001<code>L</code>\u4F4E\u3001<code>E</code>\u5916\u90E8\u3001<code>I</code>\u5185\u90E8\u3001<code>PLL</code>\u9501\u76F8\u73AF\u3001<code>Osc</code>\u632F\u8361\u5668</p></div><h2 id="\u4F4D\u5E26\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u4F4D\u5E26\u64CD\u4F5C" aria-hidden="true">#</a> \u4F4D\u5E26\u64CD\u4F5C</h2><p>\u5728\u5B66\u4E6051\u5355\u7247\u673A\u65F6\u5C31\u5DF2\u7ECF\u4F7F\u7528\u8FC7\u4F4D\u64CD\u4F5C\uFF0C\u6BD4\u5982\u4F7F\u7528<code>sbit</code>\u5BF9\u5355</p><p>\u7247\u673AIO\u53E3\u7684\u5B9A\u4E49\uFF0C\u4F46\u662FSTM32\u4E2D\u5E76\u6CA1\u6709\u8FD9\u7C7B\u5173\u952E\u5B57\uFF0C\u800C\u662F\u901A</p><p>\u8FC7\u8BBF\u95EE\u4F4D\u5E26\u522B\u540D\u533A\u6765\u5B9E\u73B0\uFF0C\u5373\u901A\u8FC7\u5C06\u6BCF\u4E2A\u6BD4\u7279\u4F4D\u81A8\u80C0\u6210\u4E00\u4E2A32\u4F4D\u5B57\uFF0C\u5F53\u8BBF\u95EE\u8FD9\u4E9B\u5B57\u7684\u65F6\u5019\u5C31\u8FBE\u5230\u4E86\u8BBF\u95EE\u6BD4\u7279\u7684\u76EE\u7684\u3002</p><p>\u6BD4\u65B9\u8BF4<code>BSRR</code>\u5BC4\u5B58\u5668\u670932\u4E2A\u4F4D\uFF0C\u90A3\u4E48\u53EF\u4EE5\u6620\u5C04\u523032\u4E2A\u5730\u5740\u4E0A\uFF0C\u5F53\u6211\u4EEC\u53BB\u8BBF\u95EE\u8FD932\u4E2A\u5730\u5740\u5C31\u8FBE\u5230\u8BBF\u95EE32\u4E2A\u6BD4\u7279\u7684\u76EE\u7684\u3002</p><p><strong>STM32\u4F4D\u5E26\u53CA\u4F4D\u5E26\u522B\u540D\u533A\u57DF</strong></p><p>\u652F\u6301\u4F4D\u5E26\u64CD\u4F5C\u7684\u533A\u57DF\u662F SRAM \u533A\u7684\u6700\u4F4E 1MB \u8303\u56F4\uFF08APB1/2\uFF0CAHB1\u5916\u8BBE\uFF09\u548C\u7247\u5185\u5916\u8BBE\u533A\u7684\u6700\u4F4E 1MB\u8303\u56F4\u3002</p><p><img src="https://m.360buyimg.com/babel/jfs/t1/210181/14/21713/117769/626689b9Eb863a664/4a2ca945d60d7f5b.png" alt="image-20220425163745292.png"></p><p><strong>\u5916\u8BBE\u4F4D\u5E26\u533A\u4E0E\u5916\u8BBE\u4F4D\u5E26\u522B\u540D\u533A\u7684\u5730\u5740\u8F6C\u6362\u516C\u5F0F\uFF1A</strong></p>`,75),D=n("p",{class:"katex-block"},[n("span",{class:"katex-display"},[n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[n("semantics",null,[n("mrow",null,[n("mi",null,"A"),n("mi",null,"l"),n("mi",null,"i"),n("mi",null,"a"),n("mi",null,"s"),n("mi",null,"A"),n("mi",null,"d"),n("mi",null,"d"),n("mi",null,"r"),n("mo",null,"="),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"42000000"),n("mo",null,"+"),n("mo",{stretchy:"false"},"("),n("mi",null,"A"),n("mo",null,"\u2212"),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"40000000"),n("mo",{stretchy:"false"},")"),n("mo",null,"\xD7"),n("mn",null,"8"),n("mo",null,"\xD7"),n("mn",null,"4"),n("mo",null,"+"),n("mi",null,"n"),n("mo",null,"\xD7"),n("mn",null,"4")]),n("annotation",{encoding:"application/x-tex"},"AliasAddr = 0\\mathrm{x}42000000+ (A-0\\mathrm{x}40000000)\\times 8\\times 4 +n\\times 4 ")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord mathnormal"},"ia"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord mathnormal"},"dd"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},"="),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"42000000"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mopen"},"("),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2212"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},"0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"40000000"),n("span",{class:"mclose"},")"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"8"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"4"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6667em","vertical-align":"-0.0833em"}}),n("span",{class:"mord mathnormal"},"n"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6444em"}}),n("span",{class:"mord"},"4")])])])])],-1),w=n("p",null,[n("strong",null,"SRAM\u4F4D\u5E26\u533A\u4E0ESRAM\u4F4D\u5E26\u522B\u540D\u533A\u7684\u5730\u5740\u8F6C\u6362\u516C\u5F0F\uFF1A")],-1),F=n("p",{class:"katex-block"},[n("span",{class:"katex-display"},[n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[n("semantics",null,[n("mrow",null,[n("mi",null,"A"),n("mi",null,"l"),n("mi",null,"i"),n("mi",null,"a"),n("mi",null,"s"),n("mi",null,"A"),n("mi",null,"d"),n("mi",null,"d"),n("mi",null,"r"),n("mo",null,"="),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"22000000"),n("mo",null,"+"),n("mo",{stretchy:"false"},"("),n("mi",null,"A"),n("mo",null,"\u2212"),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"20000000"),n("mo",{stretchy:"false"},")"),n("mo",null,"\xD7"),n("mn",null,"8"),n("mo",null,"\xD7"),n("mn",null,"4"),n("mo",null,"+"),n("mi",null,"n"),n("mo",null,"\xD7"),n("mn",null,"4")]),n("annotation",{encoding:"application/x-tex"},"AliasAddr = 0\\mathrm{x}22000000+ (A-0\\mathrm{x}20000000)\\times 8 \\times 4 +n\\times 4 ")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord mathnormal"},"ia"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord mathnormal"},"dd"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},"="),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"22000000"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mopen"},"("),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2212"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},"0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"20000000"),n("span",{class:"mclose"},")"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"8"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"4"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6667em","vertical-align":"-0.0833em"}}),n("span",{class:"mord mathnormal"},"n"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\xD7"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6444em"}}),n("span",{class:"mord"},"4")])])])])],-1),B=n("p",null,[n("code",null,"A"),s("\uFF1A\u8868\u793A\u6211\u4EEC\u8981\u64CD\u4F5C\u7684\u90A3\u4E2A\u4F4D\u6240\u5728\u7684\u5BC4\u5B58\u5668\u7684\u5730\u5740")],-1),E=n("p",null,[n("code",null,"n"),s("\uFF1A\u4F4D\u5E8F\u53F7")],-1),T=n("p",null,[n("strong",null,"\u6839\u636E\u4E0A\u8FF0\u4E24\u4E2A\u516C\u5F0F\u7279\u70B9\uFF0C\u5C06\u5176\u7EDF\u4E00\u4E3A\u4E00\u4E2A\u516C\u5F0F\u8868\u793A\uFF1A")],-1),H=n("p",{class:"katex-block"},[n("span",{class:"katex-display"},[n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[n("semantics",null,[n("mrow",null,[n("mo",{stretchy:"false"},"("),n("mo",{stretchy:"false"},"("),n("mi",null,"A"),n("mi",{mathvariant:"normal"},"&"),n("mn",null,"0"),n("mrow",null,[n("mi",{mathvariant:"normal"},"x"),n("mi",{mathvariant:"normal"},"F")]),n("mn",null,"0000000"),n("mo",{stretchy:"false"},")"),n("mo",null,"+"),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"02000000"),n("mo",null,"+"),n("mo",{stretchy:"false"},"("),n("mo",{stretchy:"false"},"("),n("mi",null,"A"),n("mi",{mathvariant:"normal"},"&"),n("mn",null,"0"),n("mi",{mathvariant:"normal"},"x"),n("mn",null,"000"),n("mrow",null,[n("mi",{mathvariant:"normal"},"F"),n("mi",{mathvariant:"normal"},"F"),n("mi",{mathvariant:"normal"},"F"),n("mi",{mathvariant:"normal"},"F"),n("mi",{mathvariant:"normal"},"F")]),n("mo",{stretchy:"false"},")"),n("mo",null,"<"),n("mo",null,"<"),n("mn",null,"5"),n("mo",{stretchy:"false"},")"),n("mo",null,"+"),n("mo",{stretchy:"false"},"("),n("mi",null,"n"),n("mo",null,"<"),n("mo",null,"<"),n("mn",null,"2"),n("mo",{stretchy:"false"},")"),n("mo",{stretchy:"false"},")")]),n("annotation",{encoding:"application/x-tex"},"((A \\& 0\\mathrm{xF}0000000)+0\\mathrm{x}02000000+((A \\& 0\\mathrm{x}000\\mathrm{FFFFF})<<5)+(n<<2)) ")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mopen"},"(("),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord"},"&0"),n("span",{class:"mord"},[n("span",{class:"mord mathrm"},"xF")]),n("span",{class:"mord"},"0000000"),n("span",{class:"mclose"},")"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),n("span",{class:"mord"},"0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"02000000"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mopen"},"(("),n("span",{class:"mord mathnormal"},"A"),n("span",{class:"mord"},"&0"),n("span",{class:"mord mathrm"},"x"),n("span",{class:"mord"},"000"),n("span",{class:"mord"},[n("span",{class:"mord mathrm"},"FFFFF")]),n("span",{class:"mclose"},")"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},"<<"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},"5"),n("span",{class:"mclose"},")"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"+"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mopen"},"("),n("span",{class:"mord mathnormal"},"n"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},"<<"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},"2"),n("span",{class:"mclose"},"))")])])])])],-1),M=p(`<p><code>A</code>\uFF1A\u8868\u793A\u6211\u4EEC\u8981\u64CD\u4F5C\u7684\u90A3\u4E2A\u4F4D\u6240\u5728\u7684\u5BC4\u5B58\u5668\u7684\u5730\u5740</p><p><code>n</code>\uFF1A\u4F4D\u5E8F\u53F7</p><p><strong>\u7406\u89E3\u8981\u70B9</strong>\uFF1A\u4F4D\u5E26\u533A\u7684\u4E00\u4E2A\u4F4D\u5728\u4F4D\u5E26\u522B\u540D\u533A\u4F1A\u88AB\u81A8\u80C0\u6210\u56DB\u4E2A\u5B57\u8282</p><div class="custom-container tip"><p class="custom-container-title">\u4E2A\u4EBA\u7406\u89E3</p><p>\u901A\u8FC7\u5730\u5740\u8BBF\u95EE\u5185\u5B58\u7684\u611F\u89C9</p></div><p><strong>\u4F18\u70B9\uFF1A</strong></p><ol><li>\u63A7\u5236GPIO\u53E3\u8F93\u5165\u8F93\u51FA\u975E\u5E38\u7B80\u5355\u3002</li><li>\u64CD\u4F5C\u4E32\u884C\u63A5\u53E3\u82AF\u7247\u975E\u5E38\u65B9\u4FBF\uFF08DS1302\u300174HC595\u7B49\uFF09\u3002</li><li>\u4EE3\u7801\u7B80\u6D01\uFF0C\u9605\u8BFB\u65B9\u4FBF\u3002</li></ol><h3 id="\u5B8F\u5B9A\u4E49\u4F4D\u5E26\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#\u5B8F\u5B9A\u4E49\u4F4D\u5E26\u5B9E\u73B0" aria-hidden="true">#</a> \u5B8F\u5B9A\u4E49\u4F4D\u5E26\u5B9E\u73B0</h3><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//system.h</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">//\u4F4D\u5E26\u64CD\u4F5C,\u5B9E\u73B051\u7C7B\u4F3C\u7684GPIO\u63A7\u5236\u529F\u80FD</span>
<span class="token comment">//\u5177\u4F53\u5B9E\u73B0\u601D\u60F3,\u53C2\u8003&lt;&lt;CM3\u6743\u5A01\u6307\u5357&gt;&gt;\u7B2C\u4E94\u7AE0(87\u9875~92\u9875).M4\u540CM3\u7C7B\u4F3C,\u53EA\u662F\u5BC4\u5B58\u5668\u5730\u5740\u53D8\u4E86.</span>
<span class="token comment">//IO\u53E3\u64CD\u4F5C\u5B8F\u5B9A\u4E49</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">BITBAND</span><span class="token expression"><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> bitnum<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>addr <span class="token operator">&amp;</span> <span class="token number">0xF0000000</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">0x2000000</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>addr <span class="token operator">&amp;</span><span class="token number">0xFFFFF</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>bitnum<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">MEM_ADDR</span><span class="token expression"><span class="token punctuation">(</span>addr<span class="token punctuation">)</span>  <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">volatile</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span>  <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">BIT_ADDR</span><span class="token expression"><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> bitnum<span class="token punctuation">)</span>   <span class="token function">MEM_ADDR</span><span class="token punctuation">(</span><span class="token function">BITBAND</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> bitnum<span class="token punctuation">)</span><span class="token punctuation">)</span> </span></span>
<span class="token comment">//IO\u53E3\u5730\u5740\u6620\u5C04</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOA_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOA_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020014</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOB_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOB_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020414 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOC_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOC_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020814 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOD_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOD_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020C14 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOE_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOE_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021014 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOF_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOF_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021414    </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOG_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOG_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021814   </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOH_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOH_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021C14    </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOI_ODR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOI_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022014 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOJ_ODR_ADDr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOJ_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022414</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOK_ODR_ADDr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOK_BASE<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022814</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOA_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOA_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020010 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOB_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOB_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020410 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOC_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOC_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020810 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOD_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOD_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40020C10 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOE_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOE_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021010 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOF_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOF_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021410 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOG_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOG_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021810 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOH_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOH_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40021C10 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOI_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOI_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022010 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOJ_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOJ_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022410 </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GPIOK_IDR_Addr</span>    <span class="token expression"><span class="token punctuation">(</span>GPIOK_BASE<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">)</span> </span><span class="token comment">//0x40022810 </span></span>

<span class="token comment">//IO\u53E3\u64CD\u4F5C,\u53EA\u5BF9\u5355\u4E00\u7684IO\u53E3!</span>
<span class="token comment">//\u786E\u4FDDn\u7684\u503C\u5C0F\u4E8E16!</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PAout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOA_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PAin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOA_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165 </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PBout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOB_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PBin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOB_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165 </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PCout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOC_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PCin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOC_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165 </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PDout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOD_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PDin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOD_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165 </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PEout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOE_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PEin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOE_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PFout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOF_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PFin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOF_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PGout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOG_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PGin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOG_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PHout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOH_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PHin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOH_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PIout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOI_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PIin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOI_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PJout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOJ_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PJin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOJ_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PKout</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOK_ODR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u51FA </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">PKin</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token function">BIT_ADDR</span><span class="token punctuation">(</span>GPIOK_IDR_Addr<span class="token punctuation">,</span>n<span class="token punctuation">)</span>  </span><span class="token comment">//\u8F93\u5165</span></span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//main.c</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span>u32 i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token function">HAL_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//\u521D\u59CB\u5316HAL\u5E93</span>
    <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8BBE\u7F6E\u65F6\u949F,180Mhz  ((25/25) * 360)/2=180</span>
    <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
		LED1 <span class="token operator">=</span> <span class="token operator">!</span>LED1<span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		LED2 <span class="token operator">=</span> <span class="token operator">!</span>LED2<span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">//\u5B9A\u4E49\u653E\u5230\u6700\u524D\u9762</span>
	GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>
	
	<span class="token function">__HAL_RCC_GPIOB_CLK_ENABLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u5148\u914D\u7F6E\u597D\u4E00\u4E2A\u7ED3\u6784\u4F53</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Pin <span class="token operator">=</span> GPIO_PIN_0<span class="token operator">|</span>GPIO_PIN_1<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Mode <span class="token operator">=</span> GPIO_MODE_OUTPUT_PP<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Pull <span class="token operator">=</span> GPIO_PULLUP<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Speed <span class="token operator">=</span> GPIO_SPEED_FREQ_VERY_HIGH<span class="token punctuation">;</span>
	<span class="token comment">//\u7136\u540E\u4E00\u80A1\u8111\u7684\u585E\u5165Init\u51FD\u6570</span>
	<span class="token function">HAL_GPIO_Init</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	LED2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	LED1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.h</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__LED_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__LED_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LED1</span> <span class="token expression"><span class="token function">PBout</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LED2</span> <span class="token expression"><span class="token function">PBout</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5B8F\u5B9A\u4E49\u5E93\u51FD\u6570\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#\u5B8F\u5B9A\u4E49\u5E93\u51FD\u6570\u5B9E\u73B0" aria-hidden="true">#</a> \u5B8F\u5B9A\u4E49\u5E93\u51FD\u6570\u5B9E\u73B0</h3><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.h</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__LED_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__LED_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token comment">//#define LED1 PBout(1)</span>
<span class="token comment">//#define LED2 PBout(0)</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LED1</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_0<span class="token punctuation">,</span>GPIO_PIN_SET<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_0<span class="token punctuation">,</span>GPIO_PIN_RESET<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LED2</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_1<span class="token punctuation">,</span>GPIO_PIN_SET<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_1<span class="token punctuation">,</span>GPIO_PIN_RESET<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LED1_Toggle</span> <span class="token expression"><span class="token punctuation">(</span><span class="token function">HAL_GPIO_TogglePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_0<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LED2_Toggle</span> <span class="token expression"><span class="token punctuation">(</span><span class="token function">HAL_GPIO_TogglePin</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_PIN_1<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//led.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">//\u5B9A\u4E49\u653E\u5230\u6700\u524D\u9762</span>
	GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>
	
	<span class="token function">__HAL_RCC_GPIOB_CLK_ENABLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u5148\u914D\u7F6E\u597D\u4E00\u4E2A\u7ED3\u6784\u4F53</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Pin <span class="token operator">=</span> GPIO_PIN_0<span class="token operator">|</span>GPIO_PIN_1<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Mode <span class="token operator">=</span> GPIO_MODE_OUTPUT_PP<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Pull <span class="token operator">=</span> GPIO_PULLUP<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>Speed <span class="token operator">=</span> GPIO_SPEED_FREQ_VERY_HIGH<span class="token punctuation">;</span>
	<span class="token comment">//\u7136\u540E\u4E00\u80A1\u8111\u7684\u585E\u5165Init\u51FD\u6570</span>
	<span class="token function">HAL_GPIO_Init</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">LED1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">LED2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">//main.c</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;system.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;led.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span>u32 i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token function">HAL_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//\u521D\u59CB\u5316HAL\u5E93</span>
    <span class="token function">SystemClock_Init</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8BBE\u7F6E\u65F6\u949F,180Mhz  ((25/25) * 360)/2=180</span>
    <span class="token function">LED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
		LED1_Toggle<span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		LED2_Toggle<span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0x7fffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u4E2A\u4EBA\u7406\u89E3</p><p>\u4F4D\u5E26\u64CD\u4F5C\u5F88\u7B80\u5355\uFF0C\u9AD8\u7248\u672C\u65E0\u6CD5\u7528\u4F4D\u5E26\u7684\u65F6\u5019\u5C31\u7528\u5B8F\u5C01\u88C5\u3002\u4E24\u79CD\u90FD\u662F\u7528\u5B8F\uFF0C\u4E00\u4E2A\u540D\u5B57\u53EF\u4EE5\u968F\u610F\u6539\u53D8\uFF0C\u589E\u52A0\u4E86\u4EE3\u7801\u53EF\u8BFB\u6027\uFF0C\u5C3D\u91CF\u719F\u6089\u5B8F\u5B9A\u4E49\u7684\u65B9\u5F0F\u7F16\u5199\u4EE3\u7801\u3002</p><p>\u4E3A\u589E\u5F3A\u53EF\u79FB\u690D\u6027\uFF0C\u5C3D\u91CF\u5728\u5934\u6587\u4EF6\u4E2D\u90FD\u7EDF\u4E00\u5B9A\u4E49\u597D\u3002</p></div><h2 id="systick\u5B9A\u65F6\u5668" tabindex="-1"><a class="header-anchor" href="#systick\u5B9A\u65F6\u5668" aria-hidden="true">#</a> SysTick\u5B9A\u65F6\u5668</h2><p>SysTick\u5B9A\u65F6\u5668\u4E5F\u53EBSysTick\u6EF4\u7B54\u5B9A\u65F6\u5668\uFF0C\u5B83\u662FCortex-M4/M7\u5185\u6838\u7684\u4E00\u4E2A\u5916\u8BBE\uFF0C\u88AB\u5D4C\u5165\u5728 NVIC \u4E2D\u3002\u5B83\u662F\u4E00\u4E2A24 \u4F4D\u5411\u4E0B\u9012\u51CF\u7684\u5B9A\u65F6\u5668\uFF0C\u6BCF\u8BA1\u6570\u4E00\u6B21\u6240\u9700\u65F6\u95F4\u4E3A1/SYSTICK\uFF0CSYSTICK\u662F\u7CFB\u7EDF\u5B9A\u65F6\u5668\u65F6\u949F\uFF0C\u5B83\u53EF\u4EE5\u76F4\u63A5\u53D6\u81EA\u7CFB\u7EDF\u65F6\u949F\uFF0C\u8FD8\u53EF\u4EE5\u901A\u8FC7\u7CFB\u7EDF\u65F6\u949F8\u5206\u9891\u540E\u83B7\u53D6\u3002\u5F53\u5B9A\u65F6\u5668\u8BA1\u6570\u52300\u65F6\uFF0C\u5C06\u4ECELOAD \u5BC4\u5B58\u5668\u4E2D\u81EA\u52A8\u91CD\u88C5\u5B9A\u65F6\u5668\u521D\u503C\uFF0C\u91CD\u65B0\u5411\u4E0B\u9012\u51CF\u8BA1\u6570\uFF0C\u5982\u6B64\u5FAA\u73AF\u5F80\u590D\u3002\u5982\u679C\u5F00\u542FSysTick\u4E2D\u65AD\u7684\u8BDD\uFF0C\u5F53\u5B9A\u65F6\u5668\u8BA1\u6570\u52300\uFF0C\u5C06\u4EA7\u751F\u4E00\u4E2A\u4E2D\u65AD\u4FE1\u53F7\u3002\u56E0\u6B64\u53EA\u8981\u77E5\u9053\u8BA1\u6570\u7684\u6B21\u6570\u5C31\u53EF\u4EE5\u51C6\u786E\u5F97\u5230\u5B83\u7684\u5EF6\u65F6\u65F6\u95F4\u3002</p><p>###\u3000<strong>SysTick</strong>\u5B9A\u65F6\u5668\u5BC4\u5B58\u5668</p><p><strong>CTRL\u5BC4\u5B58\u5668</strong></p><p>CTRL\u662FSysTick\u5B9A\u65F6\u5668\u7684\u63A7\u5236\u53CA\u72B6\u6001\u5BC4\u5B58\u5668\u3002\u5176\u76F8\u5E94\u4F4D\u529F\u80FD\u5982\u4E0B\uFF1A</p><p><img src="https://m.360buyimg.com/babel/jfs/t1/207130/18/22958/150415/6298a628E9b05322a/89ce64e95ea4c641.png" alt="image-20220426231940818.png"></p><p><strong>LOAD\u5BC4\u5B58\u5668</strong></p><p>LOAD\u662FSysTick\u5B9A\u65F6\u5668\u7684\u91CD\u88C5\u8F7D\u6570\u503C\u5BC4\u5B58\u5668\u3002\u5176\u76F8\u5E94\u4F4D\u529F\u80FD\u5982\u4E0B\uFF1A</p><p><img src="https://m.360buyimg.com/babel/jfs/t1/215793/25/19348/45052/6298a628E5e1a1292/6f7eaa0adafdbeae.png" alt="image-20220426232006118.png"></p><p><strong>VAL\u5BC4\u5B58\u5668</strong></p><p>VAL\u662FSysTick\u5B9A\u65F6\u5668\u7684\u5F53\u524D\u6570\u503C\u5BC4\u5B58\u5668\u3002\u5176\u76F8\u5E94\u4F4D\u529F\u80FD\u5982\u4E0B\uFF1A</p><p><img src="https://m.360buyimg.com/babel/jfs/t1/187084/11/25199/72969/6298a62aE9495651c/f1195f54daaf4d79.png" alt="image-20220426232018020.png"></p><p><strong>CALIB\u5BC4\u5B58\u5668</strong></p><p>CALIB\u662FSysTick\u5B9A\u65F6\u5668\u7684\u6821\u51C6\u6570\u503C\u5BC4\u5B58\u5668\u3002\u5176\u76F8\u5E94\u4F4D\u529F\u80FD\u5982\u4E0B\uFF1A</p><p><img src="https://m.360buyimg.com/babel/jfs/t1/136590/24/28876/144949/6298a629E023b3f51/f7eb8fcd192d27be.png" alt="image-20220426232029329.png"></p><p>###\u3000<strong>\u914D\u7F6E\u6B65\u9AA4</strong></p><p>SysTick\u5B9A\u65F6\u5668\u7684\u64CD\u4F5C\u53EF\u4EE5\u5206\u4E3A 4 \u6B65\uFF1A</p><ol><li>\u8BBE\u7F6ESysTick\u5B9A\u65F6\u5668\u7684\u65F6\u949F\u6E90\u3002</li><li>\u8BBE\u7F6ESysTick\u5B9A\u65F6\u5668\u7684\u91CD\u88C5\u521D\u59CB\u503C\uFF08\u5982\u679C\u8981\u4F7F\u7528\u4E2D\u65AD\u7684\u8BDD\uFF0C\u5C31\u5C06\u4E2D\u65AD\u4F7F\u80FD\u6253\u5F00\uFF09\u3002</li><li>\u6E05\u96F6SysTick\u5B9A\u65F6\u5668\u5F53\u524D\u8BA1\u6570\u5668\u7684\u503C\u3002</li><li>\u6253\u5F00SysTick\u5B9A\u65F6\u5668\u3002</li></ol>`,34);function K(N,q){const a=o("RouterLink");return l(),i("div",null,[r,d,n("nav",k,[n("ul",null,[n("li",null,[t(a,{to:"#stm32-\u6700\u5C0F\u7CFB\u7EDF\u6784\u6210"},{default:e(()=>[m]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#\u6676\u632F\u7535\u8DEF"},{default:e(()=>[v]),_:1})]),n("li",null,[t(a,{to:"#\u590D\u4F4D\u7535\u8DEF"},{default:e(()=>[b]),_:1})]),n("li",null,[t(a,{to:"#\u7535\u6E90\u7535\u8DEF"},{default:e(()=>[_]),_:1})])])]),n("li",null,[t(a,{to:"#\u5B58\u50A8\u5668\u6620\u5C04"},{default:e(()=>[h]),_:1})]),n("li",null,[t(a,{to:"#\u5BC4\u5B58\u5668\u5C01\u88C5"},{default:e(()=>[P]),_:1})]),n("li",null,[t(a,{to:"#\u542F\u52A8\u6587\u4EF6"},{default:e(()=>[y]),_:1})]),n("li",null,[t(a,{to:"#gpio\u5DE5\u4F5C\u6A21\u5F0F"},{default:e(()=>[I]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#gpio\u521D\u59CB\u5316\u6B65\u9AA4"},{default:e(()=>[O]),_:1})])])]),n("li",null,[t(a,{to:"#led\u70B9\u706F\u3001\u6A21\u677F\u521B\u5EFA"},{default:e(()=>[f]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#\u4E3B\u7A0B\u5E8F"},{default:e(()=>[L]),_:1})]),n("li",null,[t(a,{to:"#\u5C0F\u7ED3"},{default:e(()=>[g]),_:1})])])]),n("li",null,[t(a,{to:"#\u65F6\u949F\u7CFB\u7EDF"},{default:e(()=>[C]),_:1})]),n("li",null,[t(a,{to:"#\u4F4D\u5E26\u64CD\u4F5C"},{default:e(()=>[x]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#\u5B8F\u5B9A\u4E49\u4F4D\u5E26\u5B9E\u73B0"},{default:e(()=>[S]),_:1})]),n("li",null,[t(a,{to:"#\u5B8F\u5B9A\u4E49\u5E93\u51FD\u6570\u5B9E\u73B0"},{default:e(()=>[G]),_:1})])])]),n("li",null,[t(a,{to:"#systick\u5B9A\u65F6\u5668"},{default:e(()=>[A]),_:1})])])]),R,D,w,F,B,E,T,H,M])}var U=c(u,[["render",K],["__file","page13.html.vue"]]);export{U as default};
